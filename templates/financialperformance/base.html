{% load staticfiles %}

<!doctype html>

<html lang="en">

  <head>
    <link rel="shortcut icon" href="{% static 'image/cake.png'%}"/>
    <title> Cake </title>

    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css" rel="stylesheet">

    <!-- W3 CSS -->
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">

    <!-- CSS by Cake -->
    <link href="{% static 'css/cake.css' %}" rel="stylesheet" type="text/css">

    <!-- Select2 -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/css/select2.min.css" rel="stylesheet" />

    <!--Load the AJAX API-->
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

    <!-- Current Ratio Graph (Liquidity Ratio) -->
    <script type="text/javascript">
      google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
           ['Company Name', 'Current Ratio',{ role: 'style' }, 'Threshold',{ role: 'style' } ],
           {% for companyfilter in companyfilter %}
           ['{{ companyfilter.company.company_name }}',{{ companyfilter.current_ratio }},{% if companyfilter.current_ratio > 100 %} '#4DCC00' {% else %} '#F40000' {% endif %}, 100,'#00DEFD'],
           {% endfor %}
        ])
        data.addRows(5);;
        var options = {'title':'CURRENT RATIO (%)',
                       'height':500,
                       'vAxis': {title: '(%)', viewWindow: {min: -500,max: 500},},
                       'hAxis': {title: 'Company Name', viewWindow: {min: 0,max: {{companyfilter.count }}, },},
                       'legend': {position:'none'},
                       'series': {1: {type: 'line'}}};
        var chart = new google.visualization.ColumnChart(document.getElementById('current_ratio_graph'));
        chart.draw(data, options);
      }
    </script>

    <!-- Debt to Equity Ratio (Solvability Ratio) -->
    <script type="text/javascript">
      google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
           ['Company Name', 'Debt to Equity Ratio',{ role: 'style' }, 'Threshold',{ role: 'style' } ],
           {% for companyfilter in companyfilter %}
           ['{{ companyfilter.company.company_name }}',{{ companyfilter.debt_to_equity }},{% if companyfilter.debt_to_equity < 100 %} '#4DCC00' {% else %} '#F40000' {% endif %}, 100,'#00DEFD'],
           {% endfor %}
        ])
        data.addRows(5);;
        var options = {'title':'DEBT TO EQUITY RATIO (%)',
                       'height':500,
                       'vAxis': {title: '(%)',viewWindow: {min: -300,max: 300}},
                       'hAxis': {title: 'Company Name',  viewWindow: {min: 0,max: {{companyfilter.count }}}},
                       'legend': {position:'none'},
                       'series': {1: {type: 'line'}}};
        var chart = new google.visualization.ColumnChart(document.getElementById('debt_to_equity_ratio_graph'));
        chart.draw(data, options);
      }
    </script>

    <!-- Return on Equity (Profitability Ratio ) -->
    <script type="text/javascript">
      google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
           ['Company Name', 'Return on Equity',{ role: 'style' }, 'Threshold',{ role: 'style' } ],
           {% for companyfilter in companyfilter %}
           ['{{ companyfilter.company.company_name }}',{{ companyfilter.return_on_equity }},{% if companyfilter.return_on_equity > 13 %} '#4DCC00' {% else %} '#F40000' {% endif %}, 13,'#00DEFD'],
           {% endfor %}
        ])
        data.addRows(5);;
        var options = {'title':'RETURN ON EQUITY (%)',
                       'height':500,
                       'vAxis': {title: '(%)', viewWindow: {min: -50,max: 50}},
                       'hAxis': {title: 'Company Name', viewWindow: {min: 0,max: {{companyfilter.count }}}},
                       'legend': {position:'none'},
                       'series': {1: {type: 'line'}}};
        var chart = new google.visualization.ColumnChart(document.getElementById('return_on_equity_graph'));
        chart.draw(data, options);
      }
    </script>

    <!-- Operating Profit Margin (Profitability Ratio ) -->
    <script type="text/javascript">
      google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
           ['Company Name', 'Operating Profit Margin',{ role: 'style' }, 'Threshold',{ role: 'style' } ],
           {% for companyfilter in companyfilter %}
           ['{{ companyfilter.company.company_name }}',{{ companyfilter.operating_profit_margin }},{% if companyfilter.operating_profit_margin > 30 %} '#4DCC00' {% else %} '#F40000' {% endif %}, 30,'#00DEFD'],
           {% endfor %}
        ])
        data.addRows(5);;
        var options = {'title':'OPERATING PROFIT MARGIN (%)',
                       'height':500,
                       'vAxis': {title: '(%)',viewWindow: {min: -100,max: 100}},
                       'hAxis': {title: 'Company Name', viewWindow: {min: 0,max: {{companyfilter.count }}}},
                       'legend': {position:'none'},
                       'series': {1: {type: 'line'}}};
        var chart = new google.visualization.ColumnChart(document.getElementById('operating_profit_margin_graph'));
        chart.draw(data, options);
      }
    </script>

    <!-- Net Profit Margin (Profitability Ratio ) -->
    <script type="text/javascript">
      google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
           ['Company Name', 'Net Profit Margin',{ role: 'style' }, 'Threshold',{ role: 'style' } ],
           {% for companyfilter in companyfilter %}
           ['{{ companyfilter.company.company_name }}',{{ companyfilter.net_profit_margin }},{% if companyfilter.net_profit_margin > 10 %} '#4DCC00' {% else %} '#F40000' {% endif %}, 10,'#00DEFD'],
           {% endfor %}
        ])
        data.addRows(5);;
        var options = {'title':'NET PROFIT MARGIN (%)',
                       'height':500,
                       'vAxis': {title: '(%)', viewWindow: {min: -50,max: 50}},
                       'hAxis': {title: 'Company Name', viewWindow: {min: 0,max: {{companyfilter.count }}}},
                       'legend': {position:'none'},
                       'series': {1: {type: 'line'}}};
        var chart = new google.visualization.ColumnChart(document.getElementById('net_profit_margin_graph'));
        chart.draw(data, options);
      }
    </script>

    <!-- Price Earning Ratio (Market Ratio) -->
    <script type="text/javascript">
      google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
           ['Company Name', 'Price Earning Ratio',{ role: 'style' }, 'Threshold',{ role: 'style' } ],
           {% for companyfilter in companyfilter %}
           ['{{ companyfilter.company.company_name }}',{{ companyfilter.price_earning_ratio }},{% if companyfilter.price_earning_ratio < 15 %} '#4DCC00' {% else %} '#F40000' {% endif %}, 15,'#00DEFD'],
           {% endfor %}
        ])
        data.addRows(5);;
        var options = {'title':'PRICE EARNING RATIO',
                       'height':500,
                       'vAxis': {title: 'Ratio', viewWindow: {min: -200,max: 200}},
                       'hAxis': {title: 'Company Name', viewWindow: {min: 0,max: {{companyfilter.count }}}},
                       'legend': {position:'none'},
                       'series': {1: {type: 'line'}}};
        var chart = new google.visualization.ColumnChart(document.getElementById('price_earning_ratio_graph'));
        chart.draw(data, options);
      }
    </script>

    <!-- Dividend Yield (Market Ratio)-->
    <script type="text/javascript">
      google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
           ['Company Name', 'Dividend Yield',{ role: 'style' },'Threshold',{ role: 'style' }],
           {% for companyfilter in companyfilter %}
           ['{{ companyfilter.company.company_name }}',{{ companyfilter.dividend_yield }}, {% if companyfilter.dividend_yield > 3 %} '#4DCC00' {% else %} '#F40000' {% endif %}, 3,'#00DEFD'],
           {% endfor %}
        ])
        data.addRows(5);;
        var options = {'title':'DIVIDEND YIELD (%)',
                       'height':500,
                       'vAxis': {title: '(%)', viewWindow: {min: -5,max: 5}},
                       'hAxis': {title: 'Company Name', viewWindow: {min: 0,max: {{companyfilter.count }}}},
                       'legend': {position:'none'},
                       'series': {1: {type: 'line'}}};
        var chart = new google.visualization.ColumnChart(document.getElementById('dividend_yield_graph'));
        chart.draw(data, options);
      }
    </script>

    <style>
      * {
        margin: 0;
        padding: 0;
      }

      html, body {
        height: 100%;
        width: 100%;
      }

      #container {
        min-height: 100%;
      }

      #footer {
        position: relative;
        clear:both;
        margin-top: 50px;
        background-color:#22a6b3;
        min-height: 150px;
      }

      .sidenav {
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: white;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
      }

      .sidenav a {
        padding: 8px 8px 8px 32px;
        text-decoration: none;
        font-size: 18px;
        color: #989898;
        display: block;
        transition: 0.3s;
      }

      .sidenav a:hover {
        color: #48dbfb;
        font-weight: bold;
        background-color: #F0F0F0;
      }

      .sidenav .closebtn {
        position: absolute;
        top: 0;
        right: 25px;
        font-size: 36px;
        margin-left: 50px;
      }

      #main {
        transition: margin-left .5s;
        padding: 16px;
      }

      @media screen and (max-height: 450px) {
        .sidenav {padding-top: 15px;}
        .sidenav a {font-size: 18px;}
      }

      #cake-menu{
        background-color: #FFFFFF;
        border-color: #FFFFFF;
        border-width: medium;
        border-radius:5px;;
        color: black;
        font-size: 20px;
        width: 100%;
        height: 100%;
      }

      #cake-menu:hover,
      #cake-menu:focus,
      #cake-menu:active{
        background-color: #46C9B6;
        border-color: #46C9B6;
        color: white;
      }
    </style>
  </head>

  <body style='background-color:#dcdde1;'>
    <div id="container">

      <div id="mySidenav" class="sidenav">
        <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
        <a><img src="{% static 'image/cake.png'%}" width="175" style="text-center"></a>
        <br>
        <h5 style="margin-left:15px; color:#989898;">Navigation</h5>
        <a href="{% url 'main_dashboard_url' %}"><span class="glyphicon glyphicon-home"></span> Dashboard</a>
        <a href="{% url 'company_analysis_url' %}"><span class="glyphicon glyphicon-stats"></span> Analysis Financial Performance</a>
        <a href="{% url 'company_comparison_url' %}"><span class="glyphicon glyphicon-transfer"></span> Comparison Financial Performance</a>
      </div>

      <div id="main" style="margin: 0; padding: 0;" >
        <div class="row" style="background-color:#48dbfb; margin: 0; padding: 0;" >
          <span style="font-size:50px;cursor:pointer; margin-left:10px; color:white;" onclick="openNav()">&#9776;</span>
        </div>
        {% block content %}

        {% endblock %}
      </div>
    </div>

    <footer id="footer">
      <div class="container-fluid" style="margin:auto">
        <div class="row" style="margin-left:20px;">
          <h4 style="color:#FFFFFF;"><strong>Suportted by :</strong></h4>
        </div>
        <div class="row inline-block" style="margin:auto; padding-left:50px; padding-right:50px;">
          <div style="padding:30px; margin:auto"><img src="{% static 'image/idx.png' %}" width="100"></div>
          <div style="padding:30px; margin:auto"><img src="{% static 'image/rii.png' %}" width="100"></div>
          <div style="padding:30px; margin:auto"><img src="{% static 'image/sysa.jpg' %}" width="100"></div>
          <div style="padding:30px; margin:auto"><img src="{% static 'image/yuk_nabung_saham.png' %}" width="100"></div>
          <div style="padding:30px; margin:auto"><img src="{% static 'image/gunadarma.png' %}" width="100"></div>
          <div style="padding:30px; margin:auto"><img src="{% static 'image/galeri_investasi.png' %}" width="100"></div>
          <div style="padding:30px; margin:auto"><img src="{% static 'image/kspm_gunadarma.jpg' %}" width="100"></div>
        </div>
      </div>
    </footer>


    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

    <!-- Select2 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/js/select2.min.js"></script>

    <!-- Sidenav -->
    <script>
      function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
        document.getElementById("main").style.marginLeft = "250px";
        document.body.style.backgroundColor = "rgba(0,0,0,0.4)";
      }
      function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
        document.getElementById("main").style.marginLeft= "0";
        document.body.style.backgroundColor = "#DBDBE0";
      }
    </script>

    <!-- Select2 -->
    <script>
      $(document).ready(function() {
        $('.js-example-basic-multiple').select2({placeholder: "Search company by name or code or sector"});
      });
      $(document).ready(function() {
        $('.js-example-basic-single').select2({placeholder: "Search company by name or code or sector",});
      });
    </script>

  </body>

</html>
